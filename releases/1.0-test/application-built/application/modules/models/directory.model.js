define(["google","models/app.model"],function(google){var geocoords=App.get("geocoords"),directory=Backbone.Model.extend({defaults:{source:"city-guide",order:"title",radius:50,search_for:"",num:10,category:"all",lat:geocoords.latitude,lon:geocoords.longitude},renderListingResponse:function(){var icon,iconSize;$.mobile.showPageLoadingMsg(),$.ajax({url:"/json_api",data:Directory.attributes,dataType:"json",type:"get",success:function(response){console.log(response),$.mobile.hidePageLoadingMsg();var template=_.template('<li><a href="#"><img src="<%=thumbnail%>"/><h3><%=title%></h3><p><%=address%></p></a></li>');response.length&&$.each(response,function(key,value){var tmpl=template({title:value.title,thumbnail:value.thumbnail,address:value.address});$("#directoryListListings").append(tmpl)}),$("#directoryListListings").listview("refresh")}})}});return window.Directory=new directory,Directory})