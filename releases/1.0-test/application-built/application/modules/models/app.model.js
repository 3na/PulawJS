define(["../../modules/json/market-category","google"],function(categories,google){var appModel=Backbone.Model.extend({defaults:{Model:{version:"1.0 Alpha",name:"Bazaar Model",author:"Joseph G."},marketCategories:categories,geocoords:{latitude:latitude,longitude:longitude}},changePage:function(page){return $(page.el).attr("data-role","page"),page.render(),$("body").append($(page.el)),$.mobile.changePage($(page.el),{changeHash:!1}),this.firstPage=!1,this},changeCategory:function(page,catID){return $(page.el).attr("data-role","page"),page.render(catID),$("body").append($(page.el)),$.mobile.changePage($(page.el),{changeHash:!1}),this.firstPage=!1,this},showListings:function(page,callback){$(page.el).attr("data-role","page"),page.render(),$("body").append($(page.el)),$.mobile.changePage($(page.el),{changeHash:!1}),this.firstPage=!1,callback()},getOodleSingle:function(page,param,postId){return $(page.el).attr("data-role","page"),page.render(param,postId),this},getPost:function(id,page,callback){$(page.el).attr("data-role","page"),page.render(id),callback()},prepareMap:function(el,zoom){zoom===undefined?zoom=8:zoom=zoom;var coordinates=App.get("geocoords"),mapCanvas=$(el).get(0);return google.addMapToCanvas(mapCanvas,"google"),centerPoint=new mxn.LatLonPoint(coordinates.latitude,coordinates.longitude),mapstraction.setCenterAndZoom(centerPoint,zoom),mapstraction.addSmallControls(),this},setRadius:function(radius){var coordinates=App.get("geocoords");return point=new mxn.LatLonPoint(coordinates.latitude,coordinates.longitude),centerRadius=new mxn.Radius(point,5),mapstraction.removeAllPolylines(),mapstraction.removeAllFilters(),mapstraction.addPolyline(centerRadius.getPolyline(mxn.util.milesToKM(radius),"#39F")),mapstraction.addFilter("distance","le",radius),this},addMarker:function(lat,lon,infoBubble,icon,iconSize){mapstraction.addMarkerWithData(new mxn.Marker(new mxn.LatLonPoint(lat,lon)),{infoBubble:infoBubble,label:"tooltip",date:"new Date()",marker:4,iconShadowSize:[0,0],icon:icon,iconSize:iconSize,draggable:!1,hover:!1})},shout:function(message){alert(message)}});return app=new appModel,window.App=app,new appModel})