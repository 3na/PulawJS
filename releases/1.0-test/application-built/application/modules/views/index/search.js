define(["text!templates/index/search.html","locate","google.abstract"],function(template,$$$,GoogleMap){var View=Backbone.View.extend({events:{"click #searchformbtn":"search"},search:function(){var strRoute="/search/<%=keyword%>/in/<%=category%>/near/<%=ll%>",routeTpl=_.template(strRoute),keyword=$("#keyword").val(),category=$("#category").val(),location="";locationFilter("#keyword","#lat","#lon","#location",function(){location=$("#lat").val()+"_"+$("#lon").val(),Backbone.history.navigate(routeTpl({keyword:keyword,category:category,ll:location}),!0)},function(){alert("Failed to geocode the given address.")});return},template:_.template(template),render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}});return new View})