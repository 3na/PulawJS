define(["models/listing","text!templates/index/list.html"],function(market,template){var page=1,View=Backbone.View.extend({events:{"click #mapBtn":"showMap","click #listBtn":"showListing","click #showmoreBtn":"showMore","click a.oodle":"initOodleDetails"},showMap:function(){$("#map_canvasContainer").css("left","0px"),$(".listings").css("display","none")},showListing:function(){$("#map_canvasContainer").css("left","2000px"),$(".listings").css("display","block")},showMore:function(){++page,AppMarket.set({offset:page}).renderListingResponse()},initOodleDetails:function(){console.log("prepare something for this event to delegate")},template:_.template(template),render:function(catID){return AppMarket.unset("search_for"),$(this.el).html(this.template()),this.delegateEvents(),this}});return new View})